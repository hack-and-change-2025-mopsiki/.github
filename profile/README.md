# 🐾 Мопсики. Hack and Change MWS Data Analytics Solution
Идея родилась из реальной боли контент-менеджеров: не всегда понятно, какие посты вызывают у пользователей интерес, а какие нет. Мы решили создать инструмент, который делает это очевидным.

Кейс - https://drive.google.com/file/d/1wKvuTJQ8oRZv2q68Xo_IzUE-QRbRBbMd/view?usp=sharing.

Мы сделали сквозную систему аналитики, объединяющую:
- автоматический сбор показателей постов с Хабра, VC, Telegram
- метрики просмотров, дочитываний, лайков, дизлайков, избранного
- анализ комментариев и их тональности (RuBERT)
- дашборды для выявления лучших/худших постов
- чатбота для выгрузки аналитики по промптам на естественном языке

Комплексное решение для сбора, анализа и визуализации данных из различных источников с использованием современного стека технологий.

## 👥 Участники
- Колчина Ксения, @xk_r2e054 (Data Analyst)
- Скобенко Тимур, @najkes (Backend-разработчик)
- Шевченко Вероника @The_Prussian_Ambassador (UX/UI-дизайнер)

## 🔗 Ссылки
- MWS Tables https://tables.mws.ru/invite/link?token=642a692bb8ad42e4b831c4751f994d53
- Чатбот https://chatbot-two-lovat.vercel.app/

## 💪 Функционал прототипа
### Пример дашборда
[Дашборд 1](путь/к/картинке.jpg)
### Демо
### Бот

## 📋 Обзор решения

Это многомодульное приложение, которое собирает посты из различных социальных платформ (Habr, Telegram, VC.ru), анализирует их тональность с помощью NLP модели и сохраняет результаты в облачную базу данных.

```
┌─────────────────────────────────────────────────────────────┐
│                   DATA SOURCES                              │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐      │
│  │ Habr API     │  │ Telegram API │  │ VC.ru API    │      │
│  └──────┬───────┘  └──────┬───────┘  └──────┬───────┘      │
└─────────┼──────────────────┼──────────────────┼─────────────┘
          │                  │                  │
          └──────────────────┼──────────────────┘
                             │
                    ┌────────▼────────┐
                    │  COLLECTOR      │
                    │  (Node.js/TS)   │
                    │  - Fetch posts  │
                    │  - Normalize    │
                    │  - Pagination   │
                    └────────┬────────┘
                             │
          ┌──────────────────┼──────────────────┐
          │                  │                  │
     ┌────▼─────┐      ┌────▼────────┐   ┌────▼─────┐
     │ CATEGORIZER    │ MWS TABLES   │   │ CHATBOT   │
     │ (Python/ML)    │ (Database)   │   │ (React)   │
     │ - RuBERT       │              │   │           │
     │ - Sentiment    │              │   │           │
     └────┬─────┘      └────┬────────┘   └────┬─────┘
          │                  │                  │
          └──────────────────┼──────────────────┘
                             │
                    ┌────────▼────────┐
                    │   FRONTEND      │
                    │  (Next.js/React)│
                    │  - Dashboard    │
                    │  - Chat UI      │
                    └─────────────────┘
```

---

## 🏗️ Принципиальная структура проекта

```
hack-and-change-mws-da/
├── collector/                 # Node.js сервис сбора данных
│   └── index.ts              # Основной код с классами Source, Collector
│
├── categorizer/             # Python сервис анализа тональности
│   └── main.py              # FastAPI приложение с RuBERT
│
├── chatbot-fullstack/        # Next.js frontend приложение
│   ├── app/                 # Next.js app directory
│   │   ├── api/chat/route.ts # API маршрут для чата
│   │   ├── layout.tsx
│   │   └── page.tsx
│   ├── src/
│   │   ├── ui/  
│   │   │   ├── components/ChatInterface.tsx       # Интерфейс  
│   │   └── hooks/                                 # Хуки
│   ├── middleware/                                # Next.js middleware для чата
│   ├── package.json
│   ├── tsconfig.json
│   └── next.config.ts
│
└── .github/
    └── README.md            # Этот файл
```

---

## ⚡ Компоненты решения

### 1. **Collector** (Node.js + TypeScript)

**Задача:** Сбор постов из множественных источников.

**Возможности:**
- Поддержка различных внеших источников
- Пагинация для получения всех данных
- Адаптеры для Habr API, Telegram, VC.ru
- Синхронизация с MWS Tables (облачная БД)
- Обновление существующих и создание новых записей

### 2. **Categorizer** (Python + FastAPI + RuBERT)

**Задача:** Анализ тональности текстов на русском языке.

**Технологии:**
- **RuBERT** - предобученная модель для русского языка
- **PyTorch** - для вычислений на GPU/CPU
- **FastAPI** - асинхронный REST API

**API Endpoints:**

| Метод | Endpoint | Описание |
|-------|----------|---------|
| GET | `/` | Хэлс чек |
| POST | `/sentiment` | Анализ тональности |

**Пример использования:**

```bash
curl -X POST http://localhost:8000/sentiment \
  -H "Content-Type: application/json" \
  -d '{
    "texts": [
      "Отличный продукт!",
      "Очень плохо",
      "Нормально"
    ]
  }'
```

**Ответ:**

```json
{
  "results": [
    {"text": "Отличный продукт!", "sentiment": "positive", "confidence": 0.95},
    {"text": "Очень плохо", "sentiment": "negative", "confidence": 0.92},
    {"text": "Нормально", "sentiment": "neutral", "confidence": 0.87}
  ]
}
```

---

### 3. **Chatbot Fullstack** (Next.js + React)

**Задача:** Frontend для отображения данных и интерактивного чата.

**Технологии:**
- **Next.js 16** - React-фреймворк
- 🎨 **Shadcn/ui** - компоненты дизайн-системы
- 🔄 **useStreamChat** - hook для потокового чата


## 🔄 Рабочие процессы

### Процесс сбора данных

```
┌─────────────────┐
│  Инициализация  │
│   источников    │
└────────┬────────┘
         │
    ┌────▼─────────────────────┐
    │ Получить пути к постам   │
    │  (списки URL/ID)         │
    └────┬─────────────────────┘
         │
    ┌────▼──────────────────────┐
    │ Асинхронно загрузить      │
    │ данные постов от каждого  │
    │ источника (Promise.all)   │
    └────┬──────────────────────┘
         │
    ┌────▼──────────────────────┐
    │ Получить существующие     │
    │ посты из MWS Tables       │
    │ (с пагинацией)            │
    └────┬──────────────────────┘
         │
    ┌────▼──────────────────────┐
    │ Разделить на:             │
    │ - Обновляемые (exists)    │
    │ - Новые (not exists)      │
    └────┬──────────────────────┘
         │
    ┌────▼──────────────────────┐
    │ Отправить PATCH и POST    │
    │ запросы в MWS Tables      │
    └─────────────────────────────┘
```

## Требования и установка

Подробнее в соответствующих репозиториях
